{"ast":null,"code":"import React,{useState,useContext,useEffect}from\"react\";import axios from\"axios\";import GeneralContext from\"./GeneralContext\";import\"./BuyActionWindow.css\";// ✅ Ensure styles are applied\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const BuyActionWindow=_ref=>{let{uid,refreshOrders}=_ref;const{closeBuyWindow}=useContext(GeneralContext);const[stockQuantity,setStockQuantity]=useState(1);const[stockPrice,setStockPrice]=useState(0.0);const[isSubmitting,setIsSubmitting]=useState(false);useEffect(()=>{console.log(\"BuyActionWindow Rendered!\");// Debugging log\n},[]);const handleBuyClick=async()=>{setIsSubmitting(true);try{await axios.post(\"https://zerodha-clone-backend-z8u8.onrender.com/newOrder\",{name:uid,qty:stockQuantity,price:stockPrice,mode:\"BUY\"});refreshOrders();// ✅ Fetch new orders after placing order\ncloseBuyWindow();// ✅ Ensure state update\n}catch(error){console.error(\"Error placing order:\",error);}finally{setIsSubmitting(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"buy-container\",children:[\" \",/*#__PURE__*/_jsx(\"div\",{className:\"regular-order\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"inputs\",children:[/*#__PURE__*/_jsxs(\"fieldset\",{children:[/*#__PURE__*/_jsx(\"legend\",{children:\"Qty.\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:stockQuantity,onChange:e=>setStockQuantity(Number(e.target.value)),disabled:isSubmitting// ✅ Disable during submission\n})]}),/*#__PURE__*/_jsxs(\"fieldset\",{children:[/*#__PURE__*/_jsx(\"legend\",{children:\"Price\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:stockPrice,onChange:e=>setStockPrice(Number(e.target.value)),disabled:isSubmitting// ✅ Disable during submission\n})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"buttons\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-blue\",onClick:handleBuyClick,disabled:isSubmitting,children:isSubmitting?\"Processing...\":\"Buy\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-grey\",onClick:closeBuyWindow,disabled:isSubmitting,children:\"Cancel\"})]})]});};export default BuyActionWindow;","map":{"version":3,"names":["React","useState","useContext","useEffect","axios","GeneralContext","jsx","_jsx","jsxs","_jsxs","BuyActionWindow","_ref","uid","refreshOrders","closeBuyWindow","stockQuantity","setStockQuantity","stockPrice","setStockPrice","isSubmitting","setIsSubmitting","console","log","handleBuyClick","post","name","qty","price","mode","error","className","children","type","value","onChange","e","Number","target","disabled","onClick"],"sources":["C:/Users/ronak/program/zerodha clone/dashboard/src/components/BuyActionWindow.js"],"sourcesContent":["import React, { useState, useContext, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport GeneralContext from \"./GeneralContext\";\r\nimport \"./BuyActionWindow.css\"; // ✅ Ensure styles are applied\r\n\r\nconst BuyActionWindow = ({ uid, refreshOrders }) => {\r\n  const { closeBuyWindow } = useContext(GeneralContext);\r\n  const [stockQuantity, setStockQuantity] = useState(1);\r\n  const [stockPrice, setStockPrice] = useState(0.0);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  useEffect(() => {\r\n    console.log(\"BuyActionWindow Rendered!\"); // Debugging log\r\n  }, []);\r\n\r\n  const handleBuyClick = async () => {\r\n    setIsSubmitting(true);\r\n    try {\r\n      await axios.post(\"https://zerodha-clone-backend-z8u8.onrender.com/newOrder\", {\r\n        name: uid,\r\n        qty: stockQuantity,\r\n        price: stockPrice,\r\n        mode: \"BUY\",\r\n      });\r\n\r\n      refreshOrders(); // ✅ Fetch new orders after placing order\r\n      closeBuyWindow(); // ✅ Ensure state update\r\n    } catch (error) {\r\n      console.error(\"Error placing order:\", error);\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"buy-container\"> {/* ✅ Changed class for CSS targeting */}\r\n      <div className=\"regular-order\">\r\n        <div className=\"inputs\">\r\n          <fieldset>\r\n            <legend>Qty.</legend>\r\n            <input\r\n              type=\"number\"\r\n              value={stockQuantity}\r\n              onChange={(e) => setStockQuantity(Number(e.target.value))}\r\n              disabled={isSubmitting} // ✅ Disable during submission\r\n            />\r\n          </fieldset>\r\n          <fieldset>\r\n            <legend>Price</legend>\r\n            <input\r\n              type=\"number\"\r\n              value={stockPrice}\r\n              onChange={(e) => setStockPrice(Number(e.target.value))}\r\n              disabled={isSubmitting} // ✅ Disable during submission\r\n            />\r\n          </fieldset>\r\n        </div>\r\n      </div>\r\n      <div className=\"buttons\">\r\n        <button className=\"btn btn-blue\" onClick={handleBuyClick} disabled={isSubmitting}>\r\n          {isSubmitting ? \"Processing...\" : \"Buy\"}\r\n        </button>\r\n        <button className=\"btn btn-grey\" onClick={closeBuyWindow} disabled={isSubmitting}>\r\n          Cancel\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BuyActionWindow;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}